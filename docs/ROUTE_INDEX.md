# Route Index

> Auto-generated by `npm run docs:routes` — do not edit manually.
> Last generated: 2026-03-02

Total routes: **652**

## Auth Legend

| Tag | Meaning |
|-----|---------|
| Admin | `isAdmin` middleware — admin only |
| Staff | `isStaffOrAdmin` middleware — staff or admin |
| Auth | `isAuthenticated` middleware — any logged-in user |
| Session | Inline `getSessionUser` check — any logged-in user |
| Public | Intentionally unauthenticated |
| None | No auth detected (verify manually) |

---

## Auth

| Method | Path | File | Line | Auth |
|--------|------|------|------|------|
| POST | `/api/auth/google/verify` | server/routes/auth-google.ts | 35 | Public |
| POST | `/api/auth/google/callback` | server/routes/auth-google.ts | 155 | Public |
| POST | `/api/auth/google/link` | server/routes/auth-google.ts | 272 | Public |
| POST | `/api/auth/google/unlink` | server/routes/auth-google.ts | 321 | Public |
| GET | `/api/auth/google/status` | server/routes/auth-google.ts | 354 | Public |
| POST | `/api/auth/verify-member` | server/routes/auth.ts | 385 | Public |
| POST | `/api/auth/request-otp` | server/routes/auth.ts | 578 | Public |
| POST | `/api/auth/verify-otp` | server/routes/auth.ts | 792 | Public |
| POST | `/api/auth/logout` | server/routes/auth.ts | 1052 | Public |
| GET | `/api/auth/session` | server/routes/auth.ts | 1063 | Public |
| GET | `/api/auth/check-staff-admin` | server/routes/auth.ts | 1111 | Public |
| POST | `/api/auth/password-login` | server/routes/auth.ts | 1148 | Public |
| POST | `/api/auth/set-password` | server/routes/auth.ts | 1275 | Public |
| POST | `/api/auth/dev-login` | server/routes/auth.ts | 1328 | Public |
| POST | `/api/auth/test-welcome-email` | server/routes/auth.ts | 1383 | Public |

## Account

| Method | Path | File | Line | Auth |
|--------|------|------|------|------|
| POST | `/api/account/delete-request` | server/routes/account.ts | 11 | Auth |

## Members

| Method | Path | File | Line | Auth |
|--------|------|------|------|------|
| PATCH | `/api/members/:email/tier` | server/routes/members/admin-actions.ts | 28 | Staff |
| POST | `/api/members/:id/suspend` | server/routes/members/admin-actions.ts | 221 | Staff |
| DELETE | `/api/members/:email` | server/routes/members/admin-actions.ts | 328 | Staff |
| DELETE | `/api/members/:email/permanent` | server/routes/members/admin-actions.ts | 462 | Admin |
| POST | `/api/members/:email/anonymize` | server/routes/members/admin-actions.ts | 799 | Staff |
| GET | `/api/members/add-options` | server/routes/members/admin-actions.ts | 876 | Staff |
| POST | `/api/members` | server/routes/members/admin-actions.ts | 913 | Staff |
| POST | `/api/members/admin/bulk-tier-update` | server/routes/members/admin-actions.ts | 970 | Staff |
| POST | `/api/admin/member/change-email` | server/routes/members/admin-actions.ts | 1190 | Staff |
| GET | `/api/admin/member/change-email/preview` | server/routes/members/admin-actions.ts | 1223 | Staff |
| GET | `/api/admin/tier-change/tiers` | server/routes/members/admin-actions.ts | 1240 | Staff |
| POST | `/api/admin/tier-change/preview` | server/routes/members/admin-actions.ts | 1250 | Staff |
| POST | `/api/admin/tier-change/commit` | server/routes/members/admin-actions.ts | 1271 | Staff |
| GET | `/api/members/:userId/duplicates` | server/routes/members/admin-actions.ts | 1294 | Staff |
| POST | `/api/members/merge/preview` | server/routes/members/admin-actions.ts | 1305 | Admin |
| POST | `/api/members/merge/execute` | server/routes/members/admin-actions.ts | 1321 | Admin |
| POST | `/api/members/backfill-discount-codes` | server/routes/members/admin-actions.ts | 1345 | Admin |
| GET | `/api/admin/applications` | server/routes/members/applicationPipeline.ts | 9 | Staff |
| PUT | `/api/admin/applications/:id/status` | server/routes/members/applicationPipeline.ts | 41 | Staff |
| POST | `/api/admin/applications/:id/send-invite` | server/routes/members/applicationPipeline.ts | 60 | Staff |
| GET | `/api/members/:email/communications` | server/routes/members/communications.ts | 16 | Staff |
| POST | `/api/members/:email/communications` | server/routes/members/communications.ts | 34 | Staff |
| DELETE | `/api/members/:email/communications/:logId` | server/routes/members/communications.ts | 70 | Staff |
| PATCH | `/api/members/me/preferences` | server/routes/members/communications.ts | 94 | Auth |
| GET | `/api/members/me/preferences` | server/routes/members/communications.ts | 154 | Auth |
| GET | `/api/my-visits` | server/routes/members/communications.ts | 193 | Auth |
| POST | `/api/members/me/data-export-request` | server/routes/members/communications.ts | 339 | Auth |
| GET | `/api/member/dashboard-data` | server/routes/members/dashboard.ts | 27 | Auth |
| GET | `/api/members/:email/notes` | server/routes/members/notes.ts | 13 | Staff |
| POST | `/api/members/:email/notes` | server/routes/members/notes.ts | 31 | Staff |
| PUT | `/api/members/:email/notes/:noteId` | server/routes/members/notes.ts | 63 | Staff |
| DELETE | `/api/members/:email/notes/:noteId` | server/routes/members/notes.ts | 93 | Staff |
| GET | `/api/member/onboarding` | server/routes/members/onboarding.ts | 14 | Auth |
| POST | `/api/member/onboarding/complete-step` | server/routes/members/onboarding.ts | 112 | Auth |
| POST | `/api/member/onboarding/dismiss` | server/routes/members/onboarding.ts | 159 | Auth |
| PUT | `/api/member/profile` | server/routes/members/onboarding.ts | 182 | Auth |
| GET | `/api/members/:email/details` | server/routes/members/profile.ts | 41 | Auth |
| PUT | `/api/members/:email/sms-preferences` | server/routes/members/profile.ts | 237 | Auth |
| GET | `/api/members/:email/history` | server/routes/members/profile.ts | 306 | Staff |
| GET | `/api/members/:email/guests` | server/routes/members/profile.ts | 581 | Staff |
| PUT | `/api/members/:id/role` | server/routes/members/profile.ts | 613 | Admin |
| GET | `/api/members/:email/cascade-preview` | server/routes/members/profile.ts | 664 | Staff |
| GET | `/api/members/search` | server/routes/members/search.ts | 17 | Auth |
| GET | `/api/members/directory` | server/routes/members/search.ts | 158 | Staff |
| GET | `/api/guests/search` | server/routes/members/search.ts | 444 | Auth |
| GET | `/api/visitors` | server/routes/members/visitors.ts | 32 | Staff |
| GET | `/api/visitors/:id/purchases` | server/routes/members/visitors.ts | 354 | Staff |
| GET | `/api/guests/needs-email` | server/routes/members/visitors.ts | 406 | Staff |
| PATCH | `/api/guests/:guestId/email` | server/routes/members/visitors.ts | 450 | Staff |
| POST | `/api/visitors` | server/routes/members/visitors.ts | 479 | Staff |
| GET | `/api/visitors/search` | server/routes/members/visitors.ts | 666 | Staff |
| POST | `/api/visitors/backfill-types` | server/routes/members/visitors.ts | 755 | Admin |
| DELETE | `/api/visitors/:id` | server/routes/members/visitors.ts | 846 | Staff |

## Bookings

| Method | Path | File | Line | Auth |
|--------|------|------|------|------|
| POST | `/api/availability/batch` | server/routes/availability.ts | 121 | Public |
| GET | `/api/availability` | server/routes/availability.ts | 286 | None |
| POST | `/api/availability-blocks` | server/routes/availability.ts | 489 | Staff |
| GET | `/api/availability-blocks` | server/routes/availability.ts | 512 | None |
| PUT | `/api/availability-blocks/:id` | server/routes/availability.ts | 544 | Staff |
| DELETE | `/api/availability-blocks/:id` | server/routes/availability.ts | 570 | Staff |
| PUT | `/api/booking-requests/:id` | server/routes/bays/approval.ts | 20 | Staff |
| PUT | `/api/bookings/:id/checkin` | server/routes/bays/approval.ts | 122 | Staff |
| POST | `/api/admin/bookings/:id/dev-confirm` | server/routes/bays/approval.ts | 155 | Staff |
| PUT | `/api/booking-requests/:id/complete-cancellation` | server/routes/bays/approval.ts | 191 | Staff |
| GET | `/api/booking-requests` | server/routes/bays/bookings.ts | 77 | None |
| POST | `/api/booking-requests` | server/routes/bays/bookings.ts | 435 | None |
| GET | `/api/booking-requests/:id` | server/routes/bays/bookings.ts | 1006 | None |
| PUT | `/api/booking-requests/:id/member-cancel` | server/routes/bays/bookings.ts | 1064 | None |
| GET | `/api/fee-estimate` | server/routes/bays/bookings.ts | 1620 | None |
| GET | `/api/conference-room-bookings` | server/routes/bays/calendar.ts | 31 | None |
| GET | `/api/approved-bookings` | server/routes/bays/calendar.ts | 66 | Staff |
| GET | `/api/recent-activity` | server/routes/bays/notifications.ts | 12 | Staff |
| GET | `/api/bays` | server/routes/bays/resources.ts | 11 | None |
| GET | `/api/bays/:bayId/availability` | server/routes/bays/resources.ts | 26 | None |
| GET | `/api/staff/conference-room/available-slots` | server/routes/bays/staff-conference-booking.ts | 22 | Staff |
| GET | `/api/staff/conference-room/fee-estimate` | server/routes/bays/staff-conference-booking.ts | 134 | Staff |
| POST | `/api/staff/conference-room/booking` | server/routes/bays/staff-conference-booking.ts | 184 | Staff |
| GET | `/api/notice-types` | server/routes/closures.ts | 362 | None |
| POST | `/api/notice-types` | server/routes/closures.ts | 375 | Staff |
| PUT | `/api/notice-types/:id` | server/routes/closures.ts | 404 | Staff |
| DELETE | `/api/notice-types/:id` | server/routes/closures.ts | 447 | Staff |
| GET | `/api/closure-reasons` | server/routes/closures.ts | 477 | None |
| POST | `/api/closure-reasons` | server/routes/closures.ts | 500 | Staff |
| PUT | `/api/closure-reasons/:id` | server/routes/closures.ts | 527 | Staff |
| DELETE | `/api/closure-reasons/:id` | server/routes/closures.ts | 562 | Staff |
| GET | `/api/closures` | server/routes/closures.ts | 584 | None |
| GET | `/api/closures/needs-review` | server/routes/closures.ts | 599 | Staff |
| POST | `/api/closures` | server/routes/closures.ts | 634 | Staff |
| DELETE | `/api/closures/:id` | server/routes/closures.ts | 811 | Staff |
| PUT | `/api/closures/:id` | server/routes/closures.ts | 882 | Staff |
| POST | `/api/closures/backfill-blocks` | server/routes/closures.ts | 1182 | Staff |
| POST | `/api/closures/sync` | server/routes/closures.ts | 1251 | Staff |
| POST | `/api/closures/fix-orphaned` | server/routes/closures.ts | 1279 | Admin |
| POST | `/api/member/nfc-checkin` | server/routes/nfcCheckin.ts | 12 | Auth |
| GET | `/api/bookings/conflicts` | server/routes/roster.ts | 67 | None |
| GET | `/api/bookings/:bookingId/participants` | server/routes/roster.ts | 121 | None |
| POST | `/api/bookings/:bookingId/participants` | server/routes/roster.ts | 143 | None |
| DELETE | `/api/bookings/:bookingId/participants/:participantId` | server/routes/roster.ts | 180 | None |
| POST | `/api/bookings/:bookingId/participants/preview-fees` | server/routes/roster.ts | 211 | None |
| PATCH | `/api/admin/booking/:bookingId/player-count` | server/routes/roster.ts | 235 | Staff |
| POST | `/api/admin/booking/:bookingId/roster/batch` | server/routes/roster.ts | 278 | Staff |
| POST | `/api/admin/booking/:bookingId/recalculate-fees` | server/routes/roster.ts | 307 | Staff |
| GET | `/api/bookings/:id/staff-checkin-context` | server/routes/staffCheckin.ts | 336 | Staff |
| PATCH | `/api/bookings/:id/payments` | server/routes/staffCheckin.ts | 586 | Staff |
| GET | `/api/bookings/overdue-payments` | server/routes/staffCheckin.ts | 1083 | Staff |
| POST | `/api/booking-participants/:id/mark-waiver-reviewed` | server/routes/staffCheckin.ts | 1174 | Staff |
| POST | `/api/bookings/:bookingId/mark-all-waivers-reviewed` | server/routes/staffCheckin.ts | 1236 | Staff |
| POST | `/api/bookings/bulk-review-all-waivers` | server/routes/staffCheckin.ts | 1304 | Staff |
| GET | `/api/bookings/stale-waivers` | server/routes/staffCheckin.ts | 1365 | Staff |
| POST | `/api/bookings/:id/staff-direct-add` | server/routes/staffCheckin.ts | 1400 | Staff |
| POST | `/api/staff/qr-checkin` | server/routes/staffCheckin.ts | 1792 | Staff |

## Stripe

| Method | Path | File | Line | Auth |
|--------|------|------|------|------|
| POST | `/api/admin/check-expiring-cards` | server/routes/stripe/admin.ts | 50 | Admin |
| POST | `/api/admin/check-stale-waivers` | server/routes/stripe/admin.ts | 60 | Admin |
| GET | `/api/stripe/products` | server/routes/stripe/admin.ts | 70 | Staff |
| POST | `/api/stripe/products/sync` | server/routes/stripe/admin.ts | 86 | Staff |
| POST | `/api/stripe/products/sync-all` | server/routes/stripe/admin.ts | 118 | Staff |
| GET | `/api/stripe/tiers/status` | server/routes/stripe/admin.ts | 143 | Staff |
| POST | `/api/stripe/tiers/sync` | server/routes/stripe/admin.ts | 153 | Admin |
| GET | `/api/stripe/discounts/status` | server/routes/stripe/admin.ts | 179 | Staff |
| POST | `/api/stripe/discounts/sync` | server/routes/stripe/admin.ts | 189 | Admin |
| GET | `/api/stripe/billing/classification` | server/routes/stripe/admin.ts | 215 | Admin |
| GET | `/api/stripe/billing/needs-migration` | server/routes/stripe/admin.ts | 225 | Admin |
| POST | `/api/stripe/staff/send-membership-link` | server/routes/stripe/admin.ts | 246 | Staff |
| POST | `/api/stripe/staff/send-reactivation-link` | server/routes/stripe/admin.ts | 377 | Staff |
| POST | `/api/public/day-pass/checkout` | server/routes/stripe/admin.ts | 561 | None |
| GET | `/api/stripe/customer-sync-status` | server/routes/stripe/admin.ts | 635 | Staff |
| POST | `/api/stripe/sync-customers` | server/routes/stripe/admin.ts | 646 | Staff |
| POST | `/api/admin/stripe/replay-webhook` | server/routes/stripe/admin.ts | 676 | Admin |
| POST | `/api/stripe/sync-member-subscriptions` | server/routes/stripe/admin.ts | 711 | Staff |
| GET | `/api/stripe/config` | server/routes/stripe/config.ts | 10 | None |
| GET | `/api/stripe/debug-connection` | server/routes/stripe/config.ts | 20 | Staff |
| GET | `/api/stripe/coupons` | server/routes/stripe/coupons.ts | 10 | Staff |
| POST | `/api/stripe/coupons` | server/routes/stripe/coupons.ts | 44 | Admin |
| PUT | `/api/stripe/coupons/:id` | server/routes/stripe/coupons.ts | 143 | Admin |
| DELETE | `/api/stripe/coupons/:id` | server/routes/stripe/coupons.ts | 185 | Admin |
| GET | `/api/stripe/invoices/preview` | server/routes/stripe/invoices.ts | 20 | Staff |
| GET | `/api/stripe/invoices/:customerId` | server/routes/stripe/invoices.ts | 44 | Staff |
| POST | `/api/stripe/invoices` | server/routes/stripe/invoices.ts | 64 | Staff |
| POST | `/api/stripe/invoices/:invoiceId/finalize` | server/routes/stripe/invoices.ts | 110 | Staff |
| GET | `/api/stripe/invoice/:invoiceId` | server/routes/stripe/invoices.ts | 151 | Staff |
| POST | `/api/stripe/invoices/:invoiceId/void` | server/routes/stripe/invoices.ts | 168 | Staff |
| GET | `/api/my-invoices` | server/routes/stripe/invoices.ts | 208 | None |
| POST | `/api/member/bookings/:id/pay-fees` | server/routes/stripe/member-payments.ts | 149 | Auth |
| POST | `/api/member/bookings/:id/confirm-payment` | server/routes/stripe/member-payments.ts | 412 | Auth |
| POST | `/api/member/invoices/:invoiceId/pay` | server/routes/stripe/member-payments.ts | 548 | Auth |
| POST | `/api/member/invoices/:invoiceId/confirm` | server/routes/stripe/member-payments.ts | 645 | Auth |
| POST | `/api/member/guest-passes/purchase` | server/routes/stripe/member-payments.ts | 757 | Auth |
| POST | `/api/member/guest-passes/confirm` | server/routes/stripe/member-payments.ts | 870 | Auth |
| GET | `/api/member/balance` | server/routes/stripe/member-payments.ts | 951 | Auth |
| POST | `/api/member/balance/pay` | server/routes/stripe/member-payments.ts | 1205 | Auth |
| POST | `/api/member/balance/confirm` | server/routes/stripe/member-payments.ts | 1498 | Auth |
| POST | `/api/member/bookings/:bookingId/cancel-payment` | server/routes/stripe/member-payments.ts | 1531 | Auth |
| GET | `/api/stripe/prices/recurring` | server/routes/stripe/payments.ts | 131 | Staff |
| POST | `/api/stripe/create-payment-intent` | server/routes/stripe/payments.ts | 169 | Staff |
| POST | `/api/stripe/confirm-payment` | server/routes/stripe/payments.ts | 520 | Staff |
| GET | `/api/stripe/payment-intent/:id` | server/routes/stripe/payments.ts | 558 | Staff |
| POST | `/api/stripe/cancel-payment` | server/routes/stripe/payments.ts | 574 | Staff |
| POST | `/api/stripe/create-customer` | server/routes/stripe/payments.ts | 613 | Staff |
| POST | `/api/stripe/cleanup-stale-intents` | server/routes/stripe/payments.ts | 638 | Staff |
| GET | `/api/stripe/payments/:email` | server/routes/stripe/payments.ts | 672 | Staff |
| GET | `/api/billing/members/search` | server/routes/stripe/payments.ts | 720 | Staff |
| POST | `/api/stripe/staff/quick-charge` | server/routes/stripe/payments.ts | 768 | Staff |
| POST | `/api/stripe/staff/quick-charge/confirm` | server/routes/stripe/payments.ts | 1050 | Staff |
| POST | `/api/stripe/staff/quick-charge/attach-email` | server/routes/stripe/payments.ts | 1139 | Staff |
| POST | `/api/stripe/staff/charge-saved-card` | server/routes/stripe/payments.ts | 1238 | Staff |
| POST | `/api/stripe/staff/mark-booking-paid` | server/routes/stripe/payments.ts | 1542 | Staff |
| POST | `/api/stripe/staff/charge-saved-card-pos` | server/routes/stripe/payments.ts | 1615 | Staff |
| GET | `/api/stripe/staff/check-saved-card/:email` | server/routes/stripe/payments.ts | 1838 | Staff |
| GET | `/api/staff/member-balance/:email` | server/routes/stripe/payments.ts | 1886 | Staff |
| POST | `/api/purchases/send-receipt` | server/routes/stripe/payments.ts | 1976 | Staff |
| POST | `/api/payments/adjust-guest-passes` | server/routes/stripe/payments.ts | 2024 | Staff |
| GET | `/api/stripe/transactions/today` | server/routes/stripe/payments.ts | 2089 | Staff |
| POST | `/api/payments/add-note` | server/routes/stripe/payments.ts | 2230 | Staff |
| GET | `/api/payments/:paymentIntentId/notes` | server/routes/stripe/payments.ts | 2269 | Staff |
| GET | `/api/payments/refundable` | server/routes/stripe/payments.ts | 2294 | Staff |
| GET | `/api/payments/refunded` | server/routes/stripe/payments.ts | 2304 | Staff |
| GET | `/api/payments/failed` | server/routes/stripe/payments.ts | 2315 | Staff |
| POST | `/api/payments/retry` | server/routes/stripe/payments.ts | 2325 | Staff |
| POST | `/api/payments/cancel` | server/routes/stripe/payments.ts | 2462 | Staff |
| POST | `/api/payments/refund` | server/routes/stripe/payments.ts | 2529 | Staff |
| GET | `/api/payments/pending-authorizations` | server/routes/stripe/payments.ts | 2723 | Staff |
| GET | `/api/payments/future-bookings-with-fees` | server/routes/stripe/payments.ts | 2733 | Staff |
| POST | `/api/payments/capture` | server/routes/stripe/payments.ts | 2793 | Staff |
| POST | `/api/payments/void-authorization` | server/routes/stripe/payments.ts | 2853 | Staff |
| GET | `/api/payments/daily-summary` | server/routes/stripe/payments.ts | 2904 | Staff |
| POST | `/api/stripe/staff/charge-subscription-invoice` | server/routes/stripe/payments.ts | 3064 | Staff |
| GET | `/api/stripe/subscriptions/:customerId` | server/routes/stripe/subscriptions.ts | 33 | Staff |
| POST | `/api/stripe/subscriptions` | server/routes/stripe/subscriptions.ts | 57 | Staff |
| DELETE | `/api/stripe/subscriptions/:subscriptionId` | server/routes/stripe/subscriptions.ts | 127 | Staff |
| POST | `/api/stripe/sync-subscriptions` | server/routes/stripe/subscriptions.ts | 161 | Staff |
| POST | `/api/stripe/subscriptions/create-for-member` | server/routes/stripe/subscriptions.ts | 186 | Staff |
| POST | `/api/stripe/subscriptions/create-new-member` | server/routes/stripe/subscriptions.ts | 365 | Staff |
| POST | `/api/stripe/subscriptions/confirm-inline-payment` | server/routes/stripe/subscriptions.ts | 635 | Staff |
| POST | `/api/stripe/subscriptions/send-activation-link` | server/routes/stripe/subscriptions.ts | 796 | Staff |
| DELETE | `/api/stripe/subscriptions/cleanup-pending/:userId` | server/routes/stripe/subscriptions.ts | 1012 | Staff |
| POST | `/api/stripe/terminal/connection-token` | server/routes/stripe/terminal.ts | 36 | Staff |
| GET | `/api/stripe/terminal/readers` | server/routes/stripe/terminal.ts | 48 | Staff |
| POST | `/api/stripe/terminal/create-simulated-reader` | server/routes/stripe/terminal.ts | 69 | Staff |
| POST | `/api/stripe/terminal/process-payment` | server/routes/stripe/terminal.ts | 121 | Staff |
| GET | `/api/stripe/terminal/payment-status/:paymentIntentId` | server/routes/stripe/terminal.ts | 422 | Staff |
| POST | `/api/stripe/terminal/cancel-payment` | server/routes/stripe/terminal.ts | 517 | Staff |
| POST | `/api/stripe/terminal/process-subscription-payment` | server/routes/stripe/terminal.ts | 601 | Staff |
| POST | `/api/stripe/terminal/confirm-subscription-payment` | server/routes/stripe/terminal.ts | 840 | Staff |
| POST | `/api/stripe/terminal/refund-payment` | server/routes/stripe/terminal.ts | 1101 | Staff |
| POST | `/api/stripe/terminal/process-existing-payment` | server/routes/stripe/terminal.ts | 1146 | Staff |
| POST | `/api/stripe/terminal/save-card` | server/routes/stripe/terminal.ts | 1270 | Staff |
| GET | `/api/stripe/terminal/setup-status/:setupIntentId` | server/routes/stripe/terminal.ts | 1334 | Staff |
| POST | `/api/stripe/terminal/confirm-save-card` | server/routes/stripe/terminal.ts | 1352 | Staff |

## Billing

| Method | Path | File | Line | Auth |
|--------|------|------|------|------|
| GET | `/api/group-billing/products` | server/routes/groupBilling.ts | 30 | Staff |
| GET | `/api/family-billing/products` | server/routes/groupBilling.ts | 40 | Staff |
| POST | `/api/group-billing/products/sync` | server/routes/groupBilling.ts | 50 | Staff |
| POST | `/api/family-billing/products/sync` | server/routes/groupBilling.ts | 60 | Staff |
| PUT | `/api/group-billing/products/:tierName` | server/routes/groupBilling.ts | 70 | Staff |
| PUT | `/api/family-billing/products/:tierName` | server/routes/groupBilling.ts | 92 | Staff |
| GET | `/api/group-billing/groups` | server/routes/groupBilling.ts | 114 | Staff |
| GET | `/api/family-billing/groups` | server/routes/groupBilling.ts | 124 | Staff |
| GET | `/api/group-billing/group/:email` | server/routes/groupBilling.ts | 134 | Staff |
| GET | `/api/family-billing/group/:email` | server/routes/groupBilling.ts | 150 | Staff |
| PUT | `/api/group-billing/group/:groupId/name` | server/routes/groupBilling.ts | 166 | Staff |
| DELETE | `/api/group-billing/group/:groupId` | server/routes/groupBilling.ts | 199 | Staff |
| POST | `/api/group-billing/groups` | server/routes/groupBilling.ts | 216 | Staff |
| POST | `/api/family-billing/groups` | server/routes/groupBilling.ts | 244 | Staff |
| POST | `/api/group-billing/groups/:groupId/members` | server/routes/groupBilling.ts | 272 | Staff |
| POST | `/api/group-billing/groups/:groupId/corporate-members` | server/routes/groupBilling.ts | 311 | Staff |
| POST | `/api/family-billing/groups/:groupId/members` | server/routes/groupBilling.ts | 378 | Staff |
| GET | `/api/group-billing/corporate-pricing` | server/routes/groupBilling.ts | 418 | Staff |
| DELETE | `/api/group-billing/members/:memberId` | server/routes/groupBilling.ts | 435 | Staff |
| DELETE | `/api/family-billing/members/:memberId` | server/routes/groupBilling.ts | 489 | Staff |
| POST | `/api/group-billing/groups/:groupId/link-subscription` | server/routes/groupBilling.ts | 514 | Staff |
| POST | `/api/family-billing/groups/:groupId/link-subscription` | server/routes/groupBilling.ts | 543 | Staff |
| POST | `/api/group-billing/reconcile` | server/routes/groupBilling.ts | 572 | Staff |
| POST | `/api/family-billing/reconcile` | server/routes/groupBilling.ts | 594 | Staff |
| GET | `/api/member-billing/:email` | server/routes/memberBilling.ts | 155 | Staff |
| GET | `/api/member-billing/:email/outstanding` | server/routes/memberBilling.ts | 299 | Staff |
| PUT | `/api/member-billing/:email/source` | server/routes/memberBilling.ts | 417 | Staff |
| POST | `/api/member-billing/:email/pause` | server/routes/memberBilling.ts | 458 | Staff |
| POST | `/api/member-billing/:email/resume` | server/routes/memberBilling.ts | 517 | Staff |
| POST | `/api/member-billing/:email/cancel` | server/routes/memberBilling.ts | 556 | Staff |
| POST | `/api/member-billing/:email/undo-cancellation` | server/routes/memberBilling.ts | 628 | Staff |
| POST | `/api/member-billing/:email/credit` | server/routes/memberBilling.ts | 686 | Staff |
| POST | `/api/member-billing/:email/discount` | server/routes/memberBilling.ts | 758 | Staff |
| GET | `/api/member-billing/:email/invoices` | server/routes/memberBilling.ts | 839 | Staff |
| GET | `/api/member-billing/:email/payment-history` | server/routes/memberBilling.ts | 865 | Staff |
| POST | `/api/member-billing/:email/payment-link` | server/routes/memberBilling.ts | 895 | Staff |
| POST | `/api/member-billing/:email/migrate-to-stripe` | server/routes/memberBilling.ts | 938 | Staff |
| POST | `/api/member-billing/:email/cancel-migration` | server/routes/memberBilling.ts | 1054 | Staff |
| GET | `/api/member-billing/:email/migration-status` | server/routes/memberBilling.ts | 1091 | Staff |
| GET | `/api/my/billing` | server/routes/myBilling.ts | 39 | None |
| GET | `/api/my/billing/invoices` | server/routes/myBilling.ts | 161 | None |
| POST | `/api/my/billing/update-payment-method` | server/routes/myBilling.ts | 204 | None |
| POST | `/api/my/billing/portal` | server/routes/myBilling.ts | 242 | None |
| POST | `/api/my/billing/add-payment-method-for-extras` | server/routes/myBilling.ts | 307 | None |
| POST | `/api/my/billing/migrate-to-stripe` | server/routes/myBilling.ts | 356 | None |
| GET | `/api/my/balance` | server/routes/myBilling.ts | 429 | None |
| POST | `/api/my/add-funds` | server/routes/myBilling.ts | 463 | None |
| GET | `/api/my-billing/account-balance` | server/routes/myBilling.ts | 528 | None |
| POST | `/api/member-billing/:email/sync-stripe` | server/routes/myBilling.ts | 574 | None |
| POST | `/api/member-billing/:email/sync-metadata` | server/routes/myBilling.ts | 603 | None |
| POST | `/api/member-billing/:email/sync-tier-from-stripe` | server/routes/myBilling.ts | 638 | None |
| POST | `/api/member-billing/:email/backfill-cache` | server/routes/myBilling.ts | 760 | None |
| POST | `/api/my/billing/request-cancellation` | server/routes/myBilling.ts | 813 | None |
| GET | `/api/my/billing/cancellation-status` | server/routes/myBilling.ts | 891 | None |
| GET | `/api/my-billing/receipt/:paymentIntentId` | server/routes/myBilling.ts | 915 | None |

## Checkout

| Method | Path | File | Line | Auth |
|--------|------|------|------|------|
| POST | `/api/checkout/sessions` | server/routes/checkout.ts | 28 | None |
| GET | `/api/checkout/session/:sessionId` | server/routes/checkout.ts | 189 | None |

## Passes

| Method | Path | File | Line | Auth |
|--------|------|------|------|------|
| GET | `/api/day-passes/products` | server/routes/dayPasses.ts | 23 | None |
| POST | `/api/day-passes/checkout` | server/routes/dayPasses.ts | 51 | None |
| POST | `/api/day-passes/confirm` | server/routes/dayPasses.ts | 143 | Public |
| POST | `/api/day-passes/staff-checkout` | server/routes/dayPasses.ts | 283 | Staff |
| POST | `/api/day-passes/staff-checkout/confirm` | server/routes/dayPasses.ts | 369 | Staff |
| GET | `/api/guest-passes/:email` | server/routes/guestPasses.ts | 27 | Auth |
| POST | `/api/guest-passes/:email/use` | server/routes/guestPasses.ts | 145 | Auth |
| PUT | `/api/guest-passes/:email` | server/routes/guestPasses.ts | 216 | Staff |
| GET | `/api/staff/passes/unredeemed` | server/routes/passes.ts | 16 | Staff |
| GET | `/api/staff/passes/search` | server/routes/passes.ts | 46 | Staff |
| POST | `/api/staff/passes/:id/redeem` | server/routes/passes.ts | 83 | Staff |
| GET | `/api/staff/passes/:passId/history` | server/routes/passes.ts | 271 | Staff |
| POST | `/api/staff/passes/:passId/refund` | server/routes/passes.ts | 293 | Staff |

## Trackman

| Method | Path | File | Line | Auth |
|--------|------|------|------|------|
| GET | `/api/admin/trackman/needs-players` | server/routes/trackman/admin.ts | 28 | Staff |
| GET | `/api/admin/trackman/unmatched` | server/routes/trackman/admin.ts | 118 | Staff |
| POST | `/api/admin/trackman/unmatched/auto-resolve` | server/routes/trackman/admin.ts | 252 | Staff |
| POST | `/api/admin/trackman/unmatched/bulk-dismiss` | server/routes/trackman/admin.ts | 340 | Staff |
| PUT | `/api/admin/trackman/unmatched/:id/resolve` | server/routes/trackman/admin.ts | 389 | Staff |
| POST | `/api/admin/trackman/auto-resolve-same-email` | server/routes/trackman/admin.ts | 938 | Staff |
| DELETE | `/api/admin/trackman/linked-email` | server/routes/trackman/admin.ts | 1152 | Staff |
| GET | `/api/admin/trackman/matched` | server/routes/trackman/admin.ts | 1185 | Staff |
| PUT | `/api/admin/trackman/matched/:id/reassign` | server/routes/trackman/admin.ts | 1300 | Staff |
| POST | `/api/admin/trackman/unmatch-member` | server/routes/trackman/admin.ts | 1459 | Staff |
| GET | `/api/admin/booking/:id/members` | server/routes/trackman/admin.ts | 1538 | Staff |
| POST | `/api/admin/booking/:id/guests` | server/routes/trackman/admin.ts | 2616 | Staff |
| DELETE | `/api/admin/booking/:id/guests/:guestId` | server/routes/trackman/admin.ts | 2729 | Staff |
| PUT | `/api/admin/booking/:bookingId/members/:slotId/link` | server/routes/trackman/admin.ts | 2813 | Staff |
| PUT | `/api/admin/booking/:bookingId/members/:slotId/unlink` | server/routes/trackman/admin.ts | 2986 | Staff |
| GET | `/api/admin/trackman/potential-matches` | server/routes/trackman/admin.ts | 3067 | Staff |
| DELETE | `/api/admin/trackman/reset-data` | server/routes/trackman/admin.ts | 3136 | Staff |
| GET | `/api/admin/trackman/fuzzy-matches/:id` | server/routes/trackman/admin.ts | 3214 | Staff |
| GET | `/api/admin/trackman/requires-review` | server/routes/trackman/admin.ts | 3289 | Staff |
| GET | `/api/admin/backfill-sessions/preview` | server/routes/trackman/admin.ts | 3340 | Staff |
| POST | `/api/admin/backfill-sessions` | server/routes/trackman/admin.ts | 3402 | Staff |
| GET | `/api/admin/trackman/duplicate-bookings` | server/routes/trackman/admin.ts | 3580 | Staff |
| POST | `/api/admin/trackman/cleanup-duplicates` | server/routes/trackman/admin.ts | 3613 | Staff |
| POST | `/api/admin/trackman/auto-match-visitors` | server/routes/trackman/admin.ts | 3694 | Staff |
| POST | `/api/trackman/admin/cleanup-lessons` | server/routes/trackman/admin.ts | 3739 | Staff |
| GET | `/api/admin/trackman/import-runs` | server/routes/trackman/import.ts | 42 | Staff |
| POST | `/api/admin/trackman/import` | server/routes/trackman/import.ts | 52 | Staff |
| POST | `/api/admin/trackman/upload` | server/routes/trackman/import.ts | 82 | Staff |
| POST | `/api/admin/trackman/rescan` | server/routes/trackman/import.ts | 113 | Staff |
| GET | `/api/admin/trackman/reconciliation` | server/routes/trackman/reconciliation.ts | 13 | Staff |
| GET | `/api/admin/trackman/reconciliation/summary` | server/routes/trackman/reconciliation.ts | 40 | Staff |
| PUT | `/api/admin/trackman/reconciliation/:id` | server/routes/trackman/reconciliation.ts | 50 | Staff |
| POST | `/api/webhooks/trackman` | server/routes/trackman/webhook-index.ts | 290 | Public |
| GET | `/api/admin/trackman-webhooks` | server/routes/trackman/webhook-index.ts | 568 | Staff |
| GET | `/api/admin/trackman-webhooks/stats` | server/routes/trackman/webhook-index.ts | 614 | Staff |
| GET | `/api/admin/trackman-webhook/stats` | server/routes/trackman/webhook-index.ts | 646 | Staff |
| POST | `/api/admin/linked-emails` | server/routes/trackman/webhook-index.ts | 678 | Staff |
| GET | `/api/admin/linked-emails/:email` | server/routes/trackman/webhook-index.ts | 714 | Staff |
| GET | `/api/availability/trackman-cache` | server/routes/trackman/webhook-index.ts | 747 | None |
| GET | `/api/admin/trackman-webhook/failed` | server/routes/trackman/webhook-index.ts | 786 | Staff |
| POST | `/api/admin/trackman-webhook/:eventId/retry` | server/routes/trackman/webhook-index.ts | 808 | Staff |
| POST | `/api/admin/trackman-webhook/:eventId/auto-match` | server/routes/trackman/webhook-index.ts | 881 | Staff |
| POST | `/api/admin/trackman-webhook/cleanup` | server/routes/trackman/webhook-index.ts | 1141 | Staff |
| POST | `/api/admin/bookings/:id/simulate-confirm` | server/routes/trackman/webhook-index.ts | 1151 | Staff |
| POST | `/api/admin/trackman-webhooks/backfill` | server/routes/trackman/webhook-index.ts | 1380 | Admin |
| POST | `/api/trackman/replay-webhooks-to-dev` | server/routes/trackman/webhook-index.ts | 1575 | Admin |

## Events

| Method | Path | File | Line | Auth |
|--------|------|------|------|------|
| POST | `/api/events/sync/google` | server/routes/events.ts | 131 | Staff |
| POST | `/api/events/sync` | server/routes/events.ts | 148 | Staff |
| POST | `/api/calendars/sync-all` | server/routes/events.ts | 180 | Staff |
| GET | `/api/events/needs-review` | server/routes/events.ts | 219 | Staff |
| POST | `/api/events/:id/mark-reviewed` | server/routes/events.ts | 247 | Staff |
| GET | `/api/events` | server/routes/events.ts | 272 | None |
| POST | `/api/events` | server/routes/events.ts | 341 | Staff |
| PUT | `/api/events/:id` | server/routes/events.ts | 452 | Staff |
| GET | `/api/events/:id/cascade-preview` | server/routes/events.ts | 609 | Staff |
| DELETE | `/api/events/:id` | server/routes/events.ts | 637 | Staff |
| POST | `/api/eventbrite/sync` | server/routes/events.ts | 705 | Staff |
| GET | `/api/rsvps` | server/routes/events.ts | 830 | None |
| POST | `/api/rsvps` | server/routes/events.ts | 925 | Auth |
| DELETE | `/api/rsvps/:event_id/:user_email` | server/routes/events.ts | 1037 | Auth |
| GET | `/api/events/:id/rsvps` | server/routes/events.ts | 1114 | Staff |
| DELETE | `/api/events/:eventId/rsvps/:rsvpId` | server/routes/events.ts | 1152 | Staff |
| POST | `/api/events/:id/rsvps/manual` | server/routes/events.ts | 1191 | Staff |
| POST | `/api/events/:id/sync-eventbrite-attendees` | server/routes/events.ts | 1240 | Staff |
| GET | `/api/events/:id/eventbrite-attendees` | server/routes/events.ts | 1470 | Staff |

## Wellness

| Method | Path | File | Line | Auth |
|--------|------|------|------|------|
| POST | `/api/wellness-classes/sync` | server/routes/wellness.ts | 140 | Staff |
| POST | `/api/wellness-classes/backfill-calendar` | server/routes/wellness.ts | 167 | Staff |
| GET | `/api/wellness-classes/needs-review` | server/routes/wellness.ts | 255 | Staff |
| POST | `/api/wellness-classes/:id/mark-reviewed` | server/routes/wellness.ts | 271 | Staff |
| GET | `/api/wellness-classes` | server/routes/wellness.ts | 362 | None |
| POST | `/api/wellness-classes` | server/routes/wellness.ts | 422 | Staff |
| PUT | `/api/wellness-classes/:id` | server/routes/wellness.ts | 532 | Staff |
| GET | `/api/wellness-enrollments` | server/routes/wellness.ts | 870 | None |
| POST | `/api/wellness-enrollments` | server/routes/wellness.ts | 949 | Auth |
| DELETE | `/api/wellness-enrollments/:class_id/:user_email` | server/routes/wellness.ts | 1077 | Auth |
| DELETE | `/api/wellness-classes/:id` | server/routes/wellness.ts | 1263 | Staff |
| GET | `/api/wellness-classes/:id/enrollments` | server/routes/wellness.ts | 1309 | Staff |
| POST | `/api/wellness-classes/:id/enrollments/manual` | server/routes/wellness.ts | 1337 | Staff |

## Tours

| Method | Path | File | Line | Auth |
|--------|------|------|------|------|
| GET | `/api/tours` | server/routes/tours.ts | 26 | Staff |
| GET | `/api/tours/today` | server/routes/tours.ts | 55 | Staff |
| POST | `/api/tours/:id/checkin` | server/routes/tours.ts | 71 | Staff |
| PATCH | `/api/tours/:id/status` | server/routes/tours.ts | 114 | Staff |
| POST | `/api/tours/sync` | server/routes/tours.ts | 198 | Staff |
| POST | `/api/tours/book` | server/routes/tours.ts | 208 | Public |
| PATCH | `/api/tours/:id/confirm` | server/routes/tours.ts | 246 | None |
| GET | `/api/tours/needs-review` | server/routes/tours.ts | 301 | Staff |
| POST | `/api/tours/link-hubspot` | server/routes/tours.ts | 365 | Staff |
| POST | `/api/tours/create-from-hubspot` | server/routes/tours.ts | 412 | Staff |
| POST | `/api/tours/dismiss-hubspot` | server/routes/tours.ts | 452 | Staff |
| GET | `/api/tours/availability` | server/routes/tours.ts | 978 | None |
| POST | `/api/tours/schedule` | server/routes/tours.ts | 1014 | None |

## Calendar

| Method | Path | File | Line | Auth |
|--------|------|------|------|------|
| GET | `/api/admin/calendars` | server/routes/calendar.ts | 12 | Staff |
| GET | `/api/calendar-availability/golf` | server/routes/calendar.ts | 46 | None |
| GET | `/api/calendar-availability/conference` | server/routes/calendar.ts | 59 | None |
| GET | `/api/calendars` | server/routes/calendar.ts | 87 | None |
| GET | `/api/calendar/availability` | server/routes/calendar.ts | 105 | None |
| POST | `/api/admin/conference-room/backfill` | server/routes/calendar.ts | 144 | Admin |
| POST | `/api/admin/bookings/sync-history` | server/routes/calendar.ts | 174 | Admin |
| POST | `/api/admin/bookings/sync-calendar` | server/routes/calendar.ts | 208 | Staff |

## Conference

| Method | Path | File | Line | Auth |
|--------|------|------|------|------|
| POST | `/api/member/conference/prepay/estimate` | server/routes/conference/prepayment.ts | 73 | Auth |
| POST | `/api/member/conference/prepay/create-intent` | server/routes/conference/prepayment.ts | 134 | Auth |
| POST | `/api/member/conference/prepay/:id/confirm` | server/routes/conference/prepayment.ts | 412 | Auth |
| GET | `/api/member/conference/prepay/:id` | server/routes/conference/prepayment.ts | 486 | Auth |

## Staff

| Method | Path | File | Line | Auth |
|--------|------|------|------|------|
| POST | `/api/staff/manual-booking` | server/routes/staff/manualBooking.ts | 17 | Staff |
| GET | `/api/training-sections` | server/routes/training.ts | 747 | Staff |
| POST | `/api/admin/training-sections` | server/routes/training.ts | 791 | Admin |
| PUT | `/api/admin/training-sections/:id` | server/routes/training.ts | 816 | Admin |
| DELETE | `/api/admin/training-sections/:id` | server/routes/training.ts | 846 | Admin |
| POST | `/api/admin/training-sections/seed` | server/routes/training.ts | 867 | Admin |

## Tiers

| Method | Path | File | Line | Auth |
|--------|------|------|------|------|
| GET | `/api/membership-tiers` | server/routes/membershipTiers.ts | 18 | None |
| GET | `/api/membership-tiers/limits/:tierName` | server/routes/membershipTiers.ts | 38 | None |
| GET | `/api/membership-tiers/:id` | server/routes/membershipTiers.ts | 78 | None |
| PUT | `/api/membership-tiers/:id` | server/routes/membershipTiers.ts | 94 | Admin |
| POST | `/api/membership-tiers` | server/routes/membershipTiers.ts | 159 | Admin |
| POST | `/api/admin/stripe/sync-products` | server/routes/membershipTiers.ts | 213 | Staff |
| GET | `/api/admin/stripe/sync-status` | server/routes/membershipTiers.ts | 255 | Staff |
| POST | `/api/admin/stripe/pull-from-stripe` | server/routes/membershipTiers.ts | 265 | Staff |
| GET | `/api/tier-features` | server/routes/tierFeatures.ts | 30 | None |
| POST | `/api/tier-features` | server/routes/tierFeatures.ts | 132 | Admin |
| PUT | `/api/tier-features/:id` | server/routes/tierFeatures.ts | 201 | Admin |
| DELETE | `/api/tier-features/:id` | server/routes/tierFeatures.ts | 241 | Admin |
| PUT | `/api/tier-features/:featureId/values/:tierId` | server/routes/tierFeatures.ts | 259 | Admin |

## Pricing

| Method | Path | File | Line | Auth |
|--------|------|------|------|------|
| GET | `/api/pricing` | server/routes/pricing.ts | 10 | None |

## Financials

| Method | Path | File | Line | Auth |
|--------|------|------|------|------|
| GET | `/api/financials/recent-transactions` | server/routes/financials.ts | 39 | Staff |
| POST | `/api/financials/backfill-stripe-cache` | server/routes/financials.ts | 168 | Staff |
| POST | `/api/financials/sync-member-payments` | server/routes/financials.ts | 381 | Staff |
| GET | `/api/financials/cache-stats` | server/routes/financials.ts | 535 | Staff |
| GET | `/api/financials/subscriptions` | server/routes/financials.ts | 593 | Staff |
| POST | `/api/financials/subscriptions/:subscriptionId/send-reminder` | server/routes/financials.ts | 776 | Staff |
| GET | `/api/financials/invoices` | server/routes/financials.ts | 847 | Staff |

## HubSpot

| Method | Path | File | Line | Auth |
|--------|------|------|------|------|
| GET | `/api/hubspot/contacts` | server/routes/hubspot.ts | 624 | Staff |
| GET | `/api/hubspot/contacts/:id` | server/routes/hubspot.ts | 755 | Staff |
| POST | `/api/hubspot/forms/:formType` | server/routes/hubspot.ts | 936 | Public |
| POST | `/api/hubspot/sync-tiers` | server/routes/hubspot.ts | 1160 | Staff |
| PUT | `/api/hubspot/contacts/:id/tier` | server/routes/hubspot.ts | 1313 | Staff |
| POST | `/api/hubspot/webhooks` | server/routes/hubspot.ts | 1417 | None |
| POST | `/api/hubspot/push-db-tiers` | server/routes/hubspot.ts | 1562 | Staff |
| POST | `/api/hubspot/sync-billing-providers` | server/routes/hubspot.ts | 1666 | Staff |
| GET | `/api/hubspot/products` | server/routes/hubspot.ts | 1768 | Staff |
| POST | `/api/admin/hubspot/sync-form-submissions` | server/routes/hubspot.ts | 1809 | Staff |
| GET | `/api/admin/hubspot/form-sync-status` | server/routes/hubspot.ts | 1820 | Admin |
| POST | `/api/admin/hubspot/form-sync-reset` | server/routes/hubspot.ts | 1830 | Admin |
| POST | `/api/admin/hubspot/set-forms-token` | server/routes/hubspot.ts | 1841 | Admin |
| GET | `/api/admin/hubspot/set-forms-token-page` | server/routes/hubspot.ts | 1863 | Admin |
| GET | `/api/admin/hubspot/marketing-contacts-audit` | server/routes/hubspot.ts | 1948 | Admin |
| POST | `/api/admin/hubspot/remove-marketing-contacts` | server/routes/hubspot.ts | 2190 | Admin |
| GET | `/api/hubspot/deals/member/:email` | server/routes/hubspotDeals.ts | 28 | Staff |
| GET | `/api/hubspot/products` | server/routes/hubspotDeals.ts | 45 | Staff |
| PUT | `/api/hubspot/products/:id` | server/routes/hubspotDeals.ts | 55 | Staff |
| GET | `/api/hubspot/discount-rules` | server/routes/hubspotDeals.ts | 76 | Staff |
| PUT | `/api/hubspot/discount-rules/:tag` | server/routes/hubspotDeals.ts | 86 | Staff |
| POST | `/api/hubspot/deals/:dealId/line-items` | server/routes/hubspotDeals.ts | 107 | Staff |
| DELETE | `/api/hubspot/line-items/:lineItemId` | server/routes/hubspotDeals.ts | 140 | Staff |
| GET | `/api/hubspot/billing-audit/:email` | server/routes/hubspotDeals.ts | 160 | Staff |
| GET | `/api/hubspot/member-discount/:email` | server/routes/hubspotDeals.ts | 174 | Staff |
| POST | `/api/hubspot/sync-deal-stage` | server/routes/hubspotDeals.ts | 193 | Staff |
| GET | `/api/hubspot/sync-status` | server/routes/hubspotDeals.ts | 220 | Staff |
| POST | `/api/hubspot/sync-all-members` | server/routes/hubspotDeals.ts | 234 | Staff |
| POST | `/api/hubspot/sync-communication-logs` | server/routes/hubspotDeals.ts | 248 | Staff |
| POST | `/api/hubspot/push-members-to-hubspot` | server/routes/hubspotDeals.ts | 261 | Staff |
| POST | `/api/hubspot/remediate-deal-stages` | server/routes/hubspotDeals.ts | 323 | Staff |
| GET | `/api/hubspot/deal-stage-summary` | server/routes/hubspotDeals.ts | 440 | Staff |
| POST | `/api/admin/hubspot/deals/batch-delete` | server/routes/hubspotDeals.ts | 474 | Staff |

## Notifications

| Method | Path | File | Line | Auth |
|--------|------|------|------|------|
| GET | `/api/notifications` | server/routes/notifications.ts | 41 | Auth |
| GET | `/api/notifications/count` | server/routes/notifications.ts | 76 | Auth |
| PUT | `/api/notifications/:id/read` | server/routes/notifications.ts | 97 | Auth |
| PUT | `/api/notifications/mark-all-read` | server/routes/notifications.ts | 122 | Auth |
| DELETE | `/api/notifications/dismiss-all` | server/routes/notifications.ts | 143 | Auth |
| DELETE | `/api/notifications/:id` | server/routes/notifications.ts | 164 | Auth |
| GET | `/api/push/vapid-public-key` | server/routes/push.ts | 192 | None |
| POST | `/api/push/subscribe` | server/routes/push.ts | 196 | Auth |
| POST | `/api/push/unsubscribe` | server/routes/push.ts | 231 | Auth |
| POST | `/api/push/test` | server/routes/push.ts | 249 | Auth |
| POST | `/api/push/send-daily-reminders` | server/routes/push.ts | 428 | Staff |
| POST | `/api/push/send-morning-closure-notifications` | server/routes/push.ts | 585 | Staff |

## Content

| Method | Path | File | Line | Auth |
|--------|------|------|------|------|
| GET | `/api/announcements` | server/routes/announcements.ts | 45 | None |
| GET | `/api/announcements/banner` | server/routes/announcements.ts | 92 | None |
| GET | `/api/announcements/export` | server/routes/announcements.ts | 136 | Staff |
| POST | `/api/announcements` | server/routes/announcements.ts | 191 | Staff |
| PUT | `/api/announcements/:id` | server/routes/announcements.ts | 281 | Staff |
| DELETE | `/api/announcements/:id` | server/routes/announcements.ts | 371 | Staff |
| POST | `/api/announcements/sheets/connect` | server/routes/announcements.ts | 406 | Staff |
| GET | `/api/announcements/sheets/status` | server/routes/announcements.ts | 423 | Staff |
| POST | `/api/announcements/sheets/sync-from` | server/routes/announcements.ts | 437 | Staff |
| POST | `/api/announcements/sheets/sync-to` | server/routes/announcements.ts | 461 | Staff |
| POST | `/api/announcements/sheets/disconnect` | server/routes/announcements.ts | 481 | Staff |
| GET | `/api/cafe-menu` | server/routes/cafe.ts | 17 | None |
| POST | `/api/cafe-menu` | server/routes/cafe.ts | 51 | Staff |
| PUT | `/api/cafe-menu/:id` | server/routes/cafe.ts | 80 | Staff |
| DELETE | `/api/cafe-menu/:id` | server/routes/cafe.ts | 123 | Staff |
| POST | `/api/admin/seed-cafe` | server/routes/cafe.ts | 145 | Admin |
| GET | `/api/faqs` | server/routes/faqs.ts | 22 | None |
| GET | `/api/admin/faqs` | server/routes/faqs.ts | 35 | Staff |
| POST | `/api/admin/faqs` | server/routes/faqs.ts | 47 | Staff |
| PUT | `/api/admin/faqs/:id` | server/routes/faqs.ts | 72 | Staff |
| DELETE | `/api/admin/faqs/:id` | server/routes/faqs.ts | 102 | Staff |
| POST | `/api/admin/faqs/reorder` | server/routes/faqs.ts | 123 | Staff |
| POST | `/api/admin/faqs/seed` | server/routes/faqs.ts | 154 | Staff |
| GET | `/api/gallery` | server/routes/gallery.ts | 11 | None |
| POST | `/api/admin/gallery` | server/routes/gallery.ts | 38 | Staff |
| PUT | `/api/admin/gallery/:id` | server/routes/gallery.ts | 61 | Staff |
| DELETE | `/api/admin/gallery/:id` | server/routes/gallery.ts | 88 | Staff |
| POST | `/api/admin/gallery/reorder` | server/routes/gallery.ts | 108 | Staff |
| GET | `/api/notices/dismissed` | server/routes/notices.ts | 11 | Auth |
| POST | `/api/notices/dismiss` | server/routes/notices.ts | 32 | Auth |
| POST | `/api/notices/dismiss-all` | server/routes/notices.ts | 69 | Auth |

## Settings

| Method | Path | File | Line | Auth |
|--------|------|------|------|------|
| GET | `/api/settings` | server/routes/settings.ts | 70 | Auth |
| GET | `/api/settings/:key` | server/routes/settings.ts | 99 | Auth |
| PUT | `/api/admin/settings/:key` | server/routes/settings.ts | 122 | Admin |
| PUT | `/api/admin/settings` | server/routes/settings.ts | 162 | Admin |

## Data Tools

| Method | Path | File | Line | Auth |
|--------|------|------|------|------|
| GET | `/api/account/my-data` | server/routes/dataExport.ts | 28 | Auth |
| GET | `/api/account/my-data/preview` | server/routes/dataExport.ts | 52 | Auth |
| GET | `/api/account/export-history` | server/routes/dataExport.ts | 83 | Auth |
| GET | `/api/data-integrity/cached` | server/routes/dataIntegrity.ts | 21 | Admin |
| GET | `/api/data-integrity/run` | server/routes/dataIntegrity.ts | 43 | Admin |
| GET | `/api/data-integrity/summary` | server/routes/dataIntegrity.ts | 64 | Admin |
| GET | `/api/data-integrity/history` | server/routes/dataIntegrity.ts | 74 | Admin |
| POST | `/api/data-integrity/resolve` | server/routes/dataIntegrity.ts | 85 | Admin |
| GET | `/api/data-integrity/audit-log` | server/routes/dataIntegrity.ts | 119 | Admin |
| POST | `/api/data-integrity/sync-push` | server/routes/dataIntegrity.ts | 130 | Admin |
| POST | `/api/data-integrity/sync-pull` | server/routes/dataIntegrity.ts | 163 | Admin |
| GET | `/api/data-integrity/ignores` | server/routes/dataIntegrity.ts | 196 | Admin |
| POST | `/api/data-integrity/ignore` | server/routes/dataIntegrity.ts | 206 | Admin |
| DELETE | `/api/data-integrity/ignore/:issueKey` | server/routes/dataIntegrity.ts | 238 | Admin |
| POST | `/api/data-integrity/ignore-bulk` | server/routes/dataIntegrity.ts | 259 | Admin |
| POST | `/api/data-integrity/sync-stripe-metadata` | server/routes/dataIntegrity.ts | 300 | Admin |
| POST | `/api/data-integrity/cleanup` | server/routes/dataIntegrity.ts | 317 | Admin |
| GET | `/api/data-integrity/placeholder-accounts` | server/routes/dataIntegrity.ts | 333 | Admin |
| POST | `/api/data-integrity/placeholder-accounts/delete` | server/routes/dataIntegrity.ts | 469 | Admin |
| GET | `/api/data-integrity/health` | server/routes/dataIntegrity.ts | 657 | Admin |
| POST | `/api/data-integrity/fix/unlink-hubspot` | server/routes/dataIntegrity.ts | 677 | Admin |
| POST | `/api/data-integrity/fix/merge-hubspot-duplicates` | server/routes/dataIntegrity.ts | 696 | Admin |
| POST | `/api/data-integrity/fix/delete-guest-pass` | server/routes/dataIntegrity.ts | 727 | Admin |
| POST | `/api/data-integrity/fix/delete-fee-snapshot` | server/routes/dataIntegrity.ts | 743 | Admin |
| POST | `/api/data-integrity/fix/dismiss-trackman-unmatched` | server/routes/dataIntegrity.ts | 759 | Admin |
| POST | `/api/data-integrity/fix/delete-booking-participant` | server/routes/dataIntegrity.ts | 777 | Admin |
| POST | `/api/data-integrity/fix/fix-orphaned-participants` | server/routes/dataIntegrity.ts | 793 | Admin |
| POST | `/api/data-integrity/fix/convert-participant-to-guest` | server/routes/dataIntegrity.ts | 883 | Admin |
| POST | `/api/data-integrity/fix/approve-review-item` | server/routes/dataIntegrity.ts | 903 | Admin |
| POST | `/api/data-integrity/fix/delete-review-item` | server/routes/dataIntegrity.ts | 930 | Admin |
| POST | `/api/data-integrity/fix/approve-all-review-items` | server/routes/dataIntegrity.ts | 952 | Admin |
| POST | `/api/data-integrity/fix/delete-empty-session` | server/routes/dataIntegrity.ts | 994 | Admin |
| POST | `/api/data-integrity/fix/assign-session-owner` | server/routes/dataIntegrity.ts | 1041 | Admin |
| POST | `/api/data-integrity/fix/merge-stripe-customers` | server/routes/dataIntegrity.ts | 1111 | Admin |
| POST | `/api/data-integrity/fix/deactivate-stale-member` | server/routes/dataIntegrity.ts | 1139 | Admin |
| POST | `/api/data-integrity/fix/change-billing-provider` | server/routes/dataIntegrity.ts | 1163 | Admin |
| POST | `/api/data-integrity/fix/delete-member-no-email` | server/routes/dataIntegrity.ts | 1192 | Admin |
| POST | `/api/data-integrity/fix/complete-booking` | server/routes/dataIntegrity.ts | 1240 | Admin |
| POST | `/api/data-integrity/fix/cancel-stale-booking` | server/routes/dataIntegrity.ts | 1264 | Admin |
| POST | `/api/data-integrity/fix/bulk-cancel-stale-bookings` | server/routes/dataIntegrity.ts | 1288 | Admin |
| POST | `/api/data-integrity/fix/activate-stuck-member` | server/routes/dataIntegrity.ts | 1310 | Admin |
| POST | `/api/data-integrity/fix/recalculate-guest-passes` | server/routes/dataIntegrity.ts | 1334 | Admin |
| POST | `/api/data-integrity/fix/release-guest-pass-hold` | server/routes/dataIntegrity.ts | 1362 | Admin |
| POST | `/api/data-integrity/fix/cancel-orphaned-pi` | server/routes/dataIntegrity.ts | 1382 | Admin |
| POST | `/api/data-integrity/fix/delete-orphan-enrollment` | server/routes/dataIntegrity.ts | 1408 | Admin |
| POST | `/api/data-integrity/fix/delete-orphan-rsvp` | server/routes/dataIntegrity.ts | 1428 | Admin |
| POST | `/api/data-integrity/fix/accept-tier` | server/routes/dataIntegrity.ts | 1448 | Admin |
| POST | `/api/data-tools/resync-member` | server/routes/dataTools.ts | 133 | Admin |
| GET | `/api/data-tools/unlinked-guest-fees` | server/routes/dataTools.ts | 284 | Admin |
| GET | `/api/data-tools/available-sessions` | server/routes/dataTools.ts | 325 | Admin |
| POST | `/api/data-tools/link-guest-fee` | server/routes/dataTools.ts | 376 | Admin |
| GET | `/api/data-tools/bookings-search` | server/routes/dataTools.ts | 436 | Staff |
| POST | `/api/data-tools/update-attendance` | server/routes/dataTools.ts | 498 | Admin |
| POST | `/api/data-tools/mindbody-reimport` | server/routes/dataTools.ts | 558 | Admin |
| GET | `/api/data-tools/audit-log` | server/routes/dataTools.ts | 607 | Admin |
| GET | `/api/data-tools/staff-activity` | server/routes/dataTools.ts | 632 | Admin |
| POST | `/api/data-tools/cleanup-mindbody-ids` | server/routes/dataTools.ts | 680 | Admin |
| POST | `/api/data-tools/bulk-push-to-hubspot` | server/routes/dataTools.ts | 812 | Admin |
| POST | `/api/data-tools/sync-members-to-hubspot` | server/routes/dataTools.ts | 830 | Admin |
| POST | `/api/data-tools/sync-subscription-status` | server/routes/dataTools.ts | 930 | Admin |
| POST | `/api/data-tools/clear-orphaned-stripe-ids` | server/routes/dataTools.ts | 1112 | Admin |
| POST | `/api/data-tools/link-stripe-hubspot` | server/routes/dataTools.ts | 1224 | Admin |
| POST | `/api/data-tools/sync-visit-counts` | server/routes/dataTools.ts | 1377 | Admin |
| POST | `/api/data-tools/detect-duplicates` | server/routes/dataTools.ts | 1571 | Admin |
| POST | `/api/data-tools/sync-payment-status` | server/routes/dataTools.ts | 1701 | Admin |
| POST | `/api/data-tools/fix-trackman-ghost-bookings` | server/routes/dataTools.ts | 1900 | Admin |
| POST | `/api/data-tools/cleanup-stripe-customers` | server/routes/dataTools.ts | 2376 | Admin |
| GET | `/api/data-tools/cleanup-stripe-customers/status` | server/routes/dataTools.ts | 2413 | Admin |
| POST | `/api/data-tools/archive-stale-visitors` | server/routes/dataTools.ts | 2420 | Admin |
| GET | `/api/data-tools/archive-stale-visitors/status` | server/routes/dataTools.ts | 2457 | Admin |
| POST | `/api/data-tools/cleanup-ghost-fees` | server/routes/dataTools.ts | 2611 | Admin |
| GET | `/api/legacy-purchases/member/:email` | server/routes/legacyPurchases.ts | 61 | Staff |
| GET | `/api/legacy-purchases/my-purchases` | server/routes/legacyPurchases.ts | 90 | None |
| GET | `/api/members/:email/unified-purchases` | server/routes/legacyPurchases.ts | 401 | Staff |
| GET | `/api/my-unified-purchases` | server/routes/legacyPurchases.ts | 416 | None |
| GET | `/api/legacy-purchases/member/:email/stats` | server/routes/legacyPurchases.ts | 446 | Staff |
| POST | `/api/legacy-purchases/admin/import` | server/routes/legacyPurchases.ts | 472 | Admin |
| GET | `/api/legacy-purchases/admin/import-jobs` | server/routes/legacyPurchases.ts | 507 | Admin |
| POST | `/api/legacy-purchases/admin/upload-csv` | server/routes/legacyPurchases.ts | 524 | None |
| GET | `/api/legacy-purchases/admin/unmatched` | server/routes/legacyPurchases.ts | 627 | Admin |
| POST | `/api/legacy-purchases/admin/link-guest-fees` | server/routes/legacyPurchases.ts | 643 | Admin |
| POST | `/api/legacy-purchases/admin/sync-hubspot` | server/routes/legacyPurchases.ts | 834 | Admin |
| POST | `/api/legacy-purchases/admin/sync-hubspot/:email` | server/routes/legacyPurchases.ts | 1030 | Admin |
| GET | `/api/admin/mindbody/unmatched` | server/routes/mindbody.ts | 12 | Staff |
| POST | `/api/admin/mindbody/link` | server/routes/mindbody.ts | 72 | Staff |
| GET | `/api/admin/mindbody/link-history` | server/routes/mindbody.ts | 158 | Staff |

## Support

| Method | Path | File | Line | Auth |
|--------|------|------|------|------|
| POST | `/api/bug-reports` | server/routes/bugReports.ts | 13 | Auth |
| GET | `/api/admin/bug-reports` | server/routes/bugReports.ts | 54 | Staff |
| GET | `/api/admin/bug-reports/:id` | server/routes/bugReports.ts | 79 | Staff |
| PUT | `/api/admin/bug-reports/:id` | server/routes/bugReports.ts | 97 | Staff |
| DELETE | `/api/admin/bug-reports/:id` | server/routes/bugReports.ts | 153 | Staff |
| GET | `/api/admin/inquiries` | server/routes/inquiries.ts | 11 | Staff |
| GET | `/api/admin/inquiries/:id` | server/routes/inquiries.ts | 42 | Staff |
| PUT | `/api/admin/inquiries/:id` | server/routes/inquiries.ts | 62 | Staff |
| DELETE | `/api/admin/inquiries/:id` | server/routes/inquiries.ts | 91 | Staff |

## Waivers

| Method | Path | File | Line | Auth |
|--------|------|------|------|------|
| GET | `/api/waivers/status` | server/routes/waivers.ts | 13 | Auth |
| POST | `/api/waivers/sign` | server/routes/waivers.ts | 65 | Auth |
| GET | `/api/waivers/current-version` | server/routes/waivers.ts | 104 | Staff |
| POST | `/api/waivers/update-version` | server/routes/waivers.ts | 121 | Staff |

## Users

| Method | Path | File | Line | Auth |
|--------|------|------|------|------|
| GET | `/api/staff-users/by-email/:email` | server/routes/users.ts | 14 | Staff |
| GET | `/api/staff-users` | server/routes/users.ts | 45 | Staff |
| POST | `/api/staff-users` | server/routes/users.ts | 76 | Admin |
| PUT | `/api/staff-users/:id` | server/routes/users.ts | 122 | Admin |
| DELETE | `/api/staff-users/:id` | server/routes/users.ts | 184 | Admin |
| GET | `/api/admin-users` | server/routes/users.ts | 219 | Admin |
| POST | `/api/admin-users` | server/routes/users.ts | 243 | Admin |
| PUT | `/api/admin-users/:id` | server/routes/users.ts | 284 | Admin |
| DELETE | `/api/admin-users/:id` | server/routes/users.ts | 337 | Admin |
| POST | `/api/users/batch-emails` | server/routes/users.ts | 390 | Staff |

## Resources

| Method | Path | File | Line | Auth |
|--------|------|------|------|------|
| GET | `/api/resources` | server/routes/resources.ts | 48 | None |
| GET | `/api/bookings/check-existing` | server/routes/resources.ts | 57 | None |
| GET | `/api/bookings/check-existing-staff` | server/routes/resources.ts | 79 | Staff |
| GET | `/api/bookings` | server/routes/resources.ts | 98 | None |
| GET | `/api/pending-bookings` | server/routes/resources.ts | 143 | Staff |
| PUT | `/api/bookings/:id/approve` | server/routes/resources.ts | 152 | Staff |
| PUT | `/api/bookings/:id/decline` | server/routes/resources.ts | 177 | Staff |
| POST | `/api/bookings/:id/assign-member` | server/routes/resources.ts | 199 | Staff |
| POST | `/api/bookings/link-trackman-to-member` | server/routes/resources.ts | 228 | Staff |
| GET | `/api/resources/overlapping-notices` | server/routes/resources.ts | 326 | Staff |
| POST | `/api/bookings/mark-as-event` | server/routes/resources.ts | 347 | Staff |
| PUT | `/api/bookings/:id/assign-with-players` | server/routes/resources.ts | 391 | Staff |
| PUT | `/api/bookings/:id/change-owner` | server/routes/resources.ts | 450 | Staff |
| POST | `/api/bookings` | server/routes/resources.ts | 484 | None |
| GET | `/api/bookings/:id/cascade-preview` | server/routes/resources.ts | 536 | Staff |
| DELETE | `/api/bookings/:id` | server/routes/resources.ts | 552 | Staff |
| PUT | `/api/bookings/:id/member-cancel` | server/routes/resources.ts | 575 | Auth |
| POST | `/api/staff/bookings/manual` | server/routes/resources.ts | 630 | Staff |

## Media

| Method | Path | File | Line | Auth |
|--------|------|------|------|------|
| POST | `/api/admin/scan-id` | server/routes/idScanner.ts | 16 | Staff |
| POST | `/api/admin/save-id-image` | server/routes/idScanner.ts | 125 | Staff |
| GET | `/api/admin/member/:userId/id-image` | server/routes/idScanner.ts | 168 | Staff |
| DELETE | `/api/admin/member/:userId/id-image` | server/routes/idScanner.ts | 185 | Staff |
| POST | `/api/admin/upload-image` | server/routes/imageUpload.ts | 16 | Staff |

## Email

| Method | Path | File | Line | Auth |
|--------|------|------|------|------|
| GET | `/api/admin/email-templates` | server/routes/emailTemplates.ts | 8 | Staff |
| GET | `/api/admin/email-templates/:templateId/preview` | server/routes/emailTemplates.ts | 17 | Staff |

## Webhooks

| Method | Path | File | Line | Auth |
|--------|------|------|------|------|
| POST | `/api/webhooks/resend` | server/routes/resendWebhooks.ts | 159 | Public |
| GET | `/api/webhooks/resend/health` | server/routes/resendWebhooks.ts | 247 | Public |

## Monitoring

| Method | Path | File | Line | Auth |
|--------|------|------|------|------|
| GET | `/api/admin/monitoring/schedulers` | server/routes/monitoring.ts | 18 | Staff |
| GET | `/api/admin/monitoring/webhooks` | server/routes/monitoring.ts | 28 | Staff |
| GET | `/api/admin/monitoring/webhook-types` | server/routes/monitoring.ts | 42 | Staff |
| GET | `/api/admin/monitoring/jobs` | server/routes/monitoring.ts | 51 | Staff |
| GET | `/api/admin/monitoring/hubspot-queue` | server/routes/monitoring.ts | 60 | Staff |
| GET | `/api/admin/monitoring/alerts` | server/routes/monitoring.ts | 69 | Staff |
| GET | `/api/admin/monitoring/audit-logs` | server/routes/monitoring.ts | 82 | Staff |
| GET | `/api/admin/monitoring/email-health` | server/routes/monitoring.ts | 100 | Staff |
| GET | `/api/admin/monitoring/push-status` | server/routes/monitoring.ts | 176 | Staff |
| GET | `/api/admin/monitoring/auto-approve-config` | server/routes/monitoring.ts | 194 | Staff |

## Dev

| Method | Path | File | Line | Auth |
|--------|------|------|------|------|
| POST | `/test-login` | server/routes/testAuth.ts | 122 | None |
| POST | `/test-logout` | server/routes/testAuth.ts | 178 | None |
| POST | `/test-cleanup` | server/routes/testAuth.ts | 188 | None |
